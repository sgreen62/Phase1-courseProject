package courseProject;

import java.util.Scanner;

public class BankAcctApp {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        // Create two customers (Phase 2 requirement)
        for (int i = 1; i <= 2; i++) {
            System.out.println("\n--- Enter details for Customer " + i + " ---");

            Customer customer = new Customer();
            Account account = new Account();

            boolean valid;

            // Customer ID
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter Customer ID (max 5): ");
                    String id = scanner.nextLine();
                    if (id.isBlank() || id.length() > 5) {
                        throw new IllegalArgumentException("Customer ID must be 1–5 characters.");
                    }
                    customer.setCustomerID(id);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Customer SSN
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter SSN (9 digits): ");
                    String ssn = scanner.nextLine();
                    if (ssn.length() != 9 || !ssn.matches("\\d+")) {
                        throw new IllegalArgumentException("SSN must be 9 numeric digits.");
                    }
                    customer.setSSN(ssn);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Last Name
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter Last Name (max 20): ");
                    String last = scanner.nextLine();
                    if (last.isBlank() || last.length() > 20) {
                        throw new IllegalArgumentException("Last name must be 1–20 characters.");
                    }
                    customer.setLastName(last);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // First Name
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter First Name (max 15): ");
                    String first = scanner.nextLine();
                    if (first.isBlank() || first.length() > 15) {
                        throw new IllegalArgumentException("First name must be 1–15 characters.");
                    }
                    customer.setFirstName(first);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Street
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter Street (max 20): ");
                    String street = scanner.nextLine();
                    if (street.isBlank() || street.length() > 20) {
                        throw new IllegalArgumentException("Street must be 1–20 characters.");
                    }
                    customer.setStreet(street);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // City
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter City (max 20): ");
                    String city = scanner.nextLine();
                    if (city.isBlank() || city.length() > 20) {
                        throw new IllegalArgumentException("City must be 1–20 characters.");
                    }
                    customer.setCity(city);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // State
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter State (2 characters): ");
                    String state = scanner.nextLine();
                    if (state.isBlank() || state.length() != 2) {
                        throw new IllegalArgumentException("State must be exactly 2 characters.");
                    }
                    customer.setState(state.toUpperCase());
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Zip
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter Zip (5 digits): ");
                    String zip = scanner.nextLine();
                    if (zip.length() != 5 || !zip.matches("\\d+")) {
                        throw new IllegalArgumentException("Zip must be 5 numeric digits.");
                    }
                    customer.setZip(zip);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Phone
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter Phone (10 digits, no punctuation): ");
                    String phone = scanner.nextLine();
                    if (phone.length() != 10 || !phone.matches("\\d+")) {
                        throw new IllegalArgumentException("Phone must be 10 numeric digits.");
                    }
                    customer.setPhone(phone);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // ---------------------------
            // Now collect Account details
            // ---------------------------
            System.out.println("\n--- Enter Account Details ---");

            // Account Number
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter account number (max 5): ");
                    String acctNum = scanner.nextLine();
                    if (acctNum.isBlank() || acctNum.length() > 5) {
                        throw new IllegalArgumentException("Account number must be 1–5 characters.");
                    }
                    account.setAccountNumber(acctNum);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Account Type
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter account type (CHK or SAV): ");
                    String acctType = scanner.nextLine().toUpperCase();
                    if (!(acctType.equals("CHK") || acctType.equals("SAV"))) {
                        throw new IllegalArgumentException("Type must be CHK or SAV.");
                    }
                    account.setAccountType(acctType);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Service Fee
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter service fee (0.00 - 10.00): ");
                    double fee = Double.parseDouble(scanner.nextLine());
                    if (fee < 0 || fee > 10) {
                        throw new IllegalArgumentException("Service fee must be between 0 and 10.");
                    }
                    account.setServiceFee(fee);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Interest Rate
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter interest rate (0.0 - 10.0): ");
                    double rate = Double.parseDouble(scanner.nextLine());
                    if (rate < 0 || rate > 10) {
                        throw new IllegalArgumentException("Interest rate must be between 0 and 10.");
                    }
                    account.setInterestRate(rate);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // Overdraft Fee
            valid = false;
            while (!valid) {
                try {
                    System.out.print("Enter overdraft fee: ");
                    double overdraft = Double.parseDouble(scanner.nextLine());
                    if (overdraft < 0) {
                        throw new IllegalArgumentException("Overdraft fee must be non-negative.");
                    }
                    account.setOverdraftFee(overdraft);
                    valid = true;
                } catch (Exception e) {
                    System.out.println("Error: " + e.getMessage());
                }
            }

            // ---------------------------
            // Print Customer + Account
            // ---------------------------
            System.out.println("\nCustomer and Account Info:");
            System.out.println(customer.toString());
            System.out.println(account.toString());
        }

        scanner.close();
    }
}
